<!-- category.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Veg Starter items Page</title>
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
    <link rel="stylesheet" href="../category/category.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <div id="itemModal" class="modal" >
        <div class="modal-content" >
            <span class="close" onclick="closeModal()">&times;</span>
            <div style="justify-content: center; margin-top: 30px;">
                <div id="item-details" class="item-prop">
                    <label id="itemName" class="cname">Item Name: </label>
                </div>
                <div id="quantityControls" class="quantity-controls">
                    <label class="txt"> Add Quantity:</label>
                    <button class="quantity-btn" onclick="incrementQuantity()">+</button>
                    <span id="quantityValue">01</span>
                    <button class="quantity-btn" onclick="decrementQuantity()">-</button>
                </div>
                <div>
                    <div class="container-group">
                        <div class="spicy-level-container">
                            <!-- Spicy Level -->
                            <label class="spicy-level txt">Select Spicy Level:</label>
                            <select id="spicyLevel" class="mdl-textfield__input" onchange="updateSelectColor()">
                                <option value="select" class="spicy-level-option" selected>Select</option>
                                <option value="mild" class="spicy-level-option">Mild</option>
                                <option value="medium" class="spicy-level-option">Medium</option>
                                <option value="spicy" class="spicy-level-option">Spicy</option>
                                <option value="extra-spicy" class="spicy-level-option">Extra Spicy</option>
                            </select>
                        </div>
                        <div class="portion-container">
                            <!-- Portion -->
                            <label class="portion txt">Select Portion:</label>
                            <select id="portion" class="mdl-textfield__input" onchange="updateSelectColor()">
                                <option value="select" class="spicy-level-option" selected>Select</option>
                                <option value="regular" class="spicy-level-option">Regular</option>
                                <option value="large" class="spicy-level-option">Large</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="txt-area-container">
                    <label class="txt"> Add customer note here :</label>
                    <textarea id="notes" class="notes" name=" " rows="4" cols="50"></textarea>
                </div>
                
                <div class="button-container">
                    <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect btn btn-lg mb-1 modbtn"  onclick="submitCustomerName()">Submit</button>
                    <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect btn btn-lg mb-1 modbtn" onclick="closeModal()">Cancel</button>
                </div>
                <div id="keyboard-container">
                    <div id="keyboard">
                        <div class="row">
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="Q">Q</button>
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="W">W</button>
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="E">E</button>
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="R">R</button>
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="T">T</button>
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="Y">Y</button>
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="U">U</button>
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="I">I</button>
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="O">O</button>
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="P">P</button>
                        </div>
                        <div class="row">
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="A">A</button>
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="S">S</button>
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="D">D</button>
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="F">F</button>
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="G">G</button>
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="H">H</button>
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="J">J</button>
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="K">K</button>
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="L">L</button>
                        </div>
                        <div class="row">
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="Z">Z</button>
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="X">X</button>
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="C">C</button>
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="V">V</button>
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="B">B</button>
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="N">N</button>
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="M">M</button>
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn space-key" data-key="Backspace">Backspace</button>
                        </div>
                        <div class="row">
                            <!-- Additional keys: Spacebar, Comma, Period -->
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn space-key" data-key=" ">Space bar</button>
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key=",">,</button>
                            <button class="key mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key=".">.</button>
                        </div>
                    </div>
                    <div id="numpad" style="margin-left: 35px;">
                        <div class="row">
                            <button class="numkey mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="7">7</button>
                            <button class="numkey mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="8">8</button>
                            <button class="numkey mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="9">9</button>
                        </div>
                        <div class="row">
                            <button class="numkey mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="4">4</button>
                            <button class="numkey mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="5">5</button>
                            <button class="numkey mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="6">6</button>
                        </div>
                        <div class="row">
                            <button class="numkey mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="1">1</button>
                            <button class="numkey mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="2">2</button>
                            <button class="numkey mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="3">3</button>
                        </div>
                        <div class="row">
                            <button class="numkey mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect keybtn" data-key="0">0</button>
                        </div>
                    </div>
                </div>
    
            </div>
            <!-- Your existing modal script and other content here -->
        </div>
    </div>
    <div id="newContent">
        <!-- Content for the new left-content -->
        <!-- Category div with buttons -->
        <div class="category" id="vegstartercontainer">
            <!-- Buttons will be dynamically added here -->
        </div>
    </div>

    <script>
        
        function updateSelectColor() {
            var select = document.getElementById("spicyLevel");
            var selectedOption = select.options[select.selectedIndex];
            select.style.backgroundColor = window.getComputedStyle(selectedOption).backgroundColor;
        }
        
        function openModal(itemName) {
            var modal = document.getElementById('itemModal');
            modal.style.display = 'block';

            // Set the item name label based on the passed item name
            var itemNameLabel = document.getElementById('itemName');

            if (itemNameLabel) {
                itemNameLabel.innerHTML = 'Item Name: ' + itemName;
            } else {
                console.error('Item name label not found.');
            }
        }

        function closeModal() {
            var modal = document.getElementById('itemModal');
            modal.style.display = 'none';
        }

        var quantityValue = 1; // Initial quantity value

        function incrementQuantity() {
            quantityValue++;
            updateQuantityDisplay();
        }

        function decrementQuantity() {
            if (quantityValue > 1) {
                quantityValue--;
                updateQuantityDisplay();
            }
        }

        function updateQuantityDisplay() {
            var quantityDisplay = document.getElementById('quantityValue');
            quantityDisplay.textContent = quantityValue.toString().padStart(2, '0');
        }
        // Create buttons using the DOM API
        var categoryButtonsContainer = document.getElementById("vegstartercontainer");

        var items = [
            "Chilli Potato",
            "Chilli Mashroom",
            "Onion Bhajia",
            "Chana Dry Fry",
            "Veg Samosa",
            "Cocktail Samosa (8 pieces)",
            "Crispy Bhajiya",
            "Chilli Paneer",
            "Aubergine Stiry Fry",
            "Mid Veg Sizzler",
            "Paneer Shaslik",
            "Veg Noodles",
            "Mogo(Chilli, Jeera, Plain)",
            "Paneer Noodles",
            "Vegetable Tikka"
        ];

        for (let i = 0; i < items.length; i++) {
            var button = document.createElement("button");
            button.className = "mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect btn btn-lg mb-1 custom-button";
            button.style.width = "10.375rem";
            button.style.height = "5.375rem";
            button.textContent = items[i];

            // Manually control the spacing between buttons
            button.style.marginRight = "10px";
            button.style.marginBottom = "10px";
            button.onclick = function () {
                    openModal(items[i]);
                };

            categoryButtonsContainer.appendChild(button);
            
        }
 /* from here , these are keyboard functions*/
        let targetInputField;

        // Function to handle key clicks
        function handleKeyClick(key) {
            if (!targetInputField) {
                console.error('Target input field is not set.');
                return;
            }

            const cursorPosition = targetInputField.selectionStart;

            if (key === 'Backspace') {
                // Handle Backspace key
                const textBeforeCursor = targetInputField.value.slice(0, cursorPosition - 1);
                const textAfterCursor = targetInputField.value.slice(cursorPosition);
                targetInputField.value = textBeforeCursor + textAfterCursor;

                // Move the cursor back by one position
                targetInputField.selectionStart = targetInputField.selectionEnd = cursorPosition - 1;
            } else {
                // Append the clicked key to the input field
                const textBeforeCursor = targetInputField.value.slice(0, cursorPosition);
                const textAfterCursor = targetInputField.value.slice(cursorPosition);
                targetInputField.value = textBeforeCursor + key + textAfterCursor;

                // Move the cursor forward by one position
                targetInputField.selectionStart = targetInputField.selectionEnd = cursorPosition + 1;
            }
        }

        // Add event listeners to keys
        const keys = document.querySelectorAll('.key, .numkey');
        keys.forEach(key => {
            key.addEventListener('click', () => {
                const keyValue = key.dataset.key;
                handleKeyClick(keyValue);
            });
        });

        // Function to set the target input field
        function setTargetInputField(inputFieldId) {
            targetInputField = document.getElementById(inputFieldId);
        }

        // Expose functions and variables needed for external use
        window.keyboard = {
            setTargetInputField,
            handleKeyClick
        };

        // Set the target input field when the iframe is fully loaded
        window.onload = function () {
            // Assuming the input field has an ID of 'myInputField'
            window.parent.keyboard.setTargetInputField('notes');
        };
        </script>

    <!-- Include MDL JS -->
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
</body>
</html>
